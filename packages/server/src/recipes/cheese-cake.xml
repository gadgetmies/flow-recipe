<?xml version="1.0" encoding="utf-8" ?>
<recipe xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="recipe.xsd">
    <title>Cheese cake</title>
    <ingredients>
        <ingredient id="cookies">cookies</ingredient>
        <ingredient id="butter">butter</ingredient>
        <ingredient id="gelatin">gelatin</ingredient>
        <ingredient id="cold-water">cold water</ingredient>
        <ingredient id="cream">cream</ingredient>
        <ingredient id="cinnamon">cinnamon<properties>
                <property name="type" value="ground"/>
            </properties>
        </ingredient>
        <ingredient id="cinnamon-plum-quark">cinnamon plum quark</ingredient>
        <ingredient id="sugar">sugar</ingredient>
        <ingredient id="glogg">glogg</ingredient>
    </ingredients>
    <tools>
        <tool id="baking-tin">baking tin<properties>
                <property name="circumference">
                    <numeric-value number="20" unit="centimeters"/>
                </property>
            </properties>
        </tool>
        <tool id="baking-parchment">baking parchment</tool>
        <tool id="cling-film">cling film</tool>
        <tool id="bowl1">bowl</tool>
        <tool id="bowl2">bowl</tool>
        <tool id="bowl3">bowl</tool>
        <tool id="bowl4">bowl</tool>
        <tool id="cup">cup</tool>
        <tool id="plate1">plate</tool>
        <tool id="plate2">plate</tool>
        <tool id="cup2">cup</tool>
        <tool id="cup3">cup</tool>
    </tools>
    <tasks>
        <task operation="measure">
            <options>
                <option name="amount">
                    <numeric-value number="150" unit="grams"/>
                </option>
            </options>
            <inputs>
                <input ref="cookies"/>
            </inputs>
            <outputs>
                <output id="150g-cookies">cookies</output>
            </outputs>
        </task>
        <task operation="measure">
            <options>
                <option name="amount">
                    <numeric-value number="50" unit="grams"/>
                </option>
            </options>
            <inputs>
                <input ref="butter"/>
            </inputs>
            <tools>
                <tool ref="cup"/>
            </tools>
            <outputs>
                <output id="50g-butter">butter</output>
            </outputs>
        </task>
        <task operation="measure">
            <options>
                <option name="amount">
                    <numeric-value number="4" unit="sheets"/>
                </option>
            </options>
            <inputs>
                <input ref="gelatin"/>
            </inputs>
            <outputs>
                <output id="gelatin-for-filling">gelatin</output>
            </outputs>
        </task>
        <task operation="measure">
            <options>
                <option name="amount">
                    <numeric-value number="2" unit="deciliters"/>
                </option>
            </options>
            <inputs>
                <input ref="cold-water"/>
            </inputs>
            <tools>
                <tool ref="plate1"/>
            </tools>
            <outputs>
                <output id="cold-water-for-soaking1">cold water</output>
            </outputs>
        </task>
        <task operation="measure">
            <options>
                <option name="amount">
                    <numeric-value number="2" unit="deciliters"/>
                </option>
            </options>
            <inputs>
                <input ref="cream"/>
            </inputs>
            <tools>
                <tool ref="bowl2"/>
            </tools>
            <outputs>
                <output id="2dl-cream">cream</output>
            </outputs>
        </task>
        <task operation="measure">
            <options>
                <option name="amount">
                    <numeric-value number="1" unit="teaspoons"/>
                </option>
            </options>
            <inputs>
                <input ref="cinnamon"/>
                <!-- TODO: having to specify the target is probelmatic as it will fix the order the ingredients are measured and mixed.
                 Would be better to combine the measure and mix -->
                <input ref="whipped-cream"/>
            </inputs>
            <outputs>
                <output id="whipped-cream+cinnamon">whipped cream and cinnamon</output>
            </outputs>
        </task>
        <task operation="measure">
            <options>
                <option name="amount">
                    <numeric-value number="2" unit="tablespoons"/>
                </option>
            </options>
            <inputs>
                <input ref="glogg"/>
            </inputs>
            <tools>
                <tool ref="cup2"/>
            </tools>
            <outputs>
                <output id="glogg-for-filling">glogg</output>
            </outputs>
        </task>
        <task operation="measure">
            <options>
                <option name="amount">
                    <numeric-value number="2.5" unit="deciliters"/>
                </option>
            </options>
            <inputs>
                <input ref="glogg"/>
            </inputs>
            <tools>
                <tool ref="bowl4"/>
            </tools>
            <outputs>
                <output id="cold-glogg-for-glaze">cold glogg</output>
            </outputs>
        </task>
        <task operation="measure">
            <options>
                <option name="amount">
                    <numeric-value number="0.5" unit="deciliters"/>
                </option>
            </options>
            <inputs>
                <input ref="glogg"/>
            </inputs>
            <tools>
                <tool ref="cup3"/>
            </tools>
            <outputs>
                <output id="glogg-to-be-heated-for-glaze">glogg</output>
            </outputs>
        </task>
        <task operation="measure">
            <options>
                <option name="amount">
                    <numeric-value number="3" unit="sheets"/>
                </option>
            </options>
            <inputs>
                <input ref="gelatin"/>
            </inputs>
            <outputs>
                <output id="gelatin-for-glaze">gelatin for glaze</output>
            </outputs>
        </task>
        <task operation="melt">
            <inputs>
                <input ref="50g-butter"/>
            </inputs>
            <outputs>
                <output id="melted-butter">melted butter</output>
            </outputs>
        </task>
        <join>
            <task operation="crumble">
                <inputs>
                    <input ref="150g-cookies"/>
                </inputs>
                <outputs>
                    <output id="crumbled-cookies">crumbled cookies</output>
                </outputs>
            </task>
            <task operation="incorporate">
                <inputs>
                    <input ref="melted-butter"/>
                    <input ref="crumbled-cookies"/>
                </inputs>
                <outputs>
                    <output id="butter+cookies">butter and cookies</output>
                </outputs>
            </task>
        </join>
        <task operation="line">
            <inputs>
                <input ref="baking-tin"/>
                <input ref="baking-parchment"/>
            </inputs>
            <outputs>
                <output id="lined-tin">lined baking tin</output>
            </outputs>
        </task>
        <task operation="press">
            <inputs>
                <input ref="lined-tin"/>
                <input ref="butter+cookies"/>
            </inputs>
            <outputs>
                <output id="butter+cookies-in-tin">butter and cookies in tin</output>
            </outputs>
        </task>
        <task operation="measure">
            <options>
                <option name="amount">
                    <numeric-value number="2" unit="deciliters"/>
                </option>
            </options>
            <inputs>
                <input ref="cold-water"/>
            </inputs>
            <tools>
                <tool ref="plate2"/>
            </tools>
            <outputs>
                <output id="cold-water-for-soaking2">cold water</output>
            </outputs>
        </task>
        <task operation="soak">
            <inputs>
                <input ref="gelatin-for-filling"/>
                <input ref="cold-water-for-soaking1"/>
            </inputs>
            <outputs>
                <output id="soaked-gelatin-for-filling">soaked gelatin</output>
            </outputs>
        </task>
        <task operation="soak">
            <inputs>
                <input ref="gelatin-for-glaze"/>
                <input ref="cold-water-for-soaking2"/>
            </inputs>
            <outputs>
                <output id="soaked-gelatin-for-glaze">soaked gelatin for glaze</output>
            </outputs>
        </task>
        <task operation="whip">
            <inputs>
                <input ref="2dl-cream"/>
            </inputs>
            <outputs>
                <output id="whipped-cream">whipped cream</output>
            </outputs>
        </task>
        <task operation="mix">
            <inputs>
                <input ref="whipped-cream+cinnamon"/>
            </inputs>
            <outputs>
                <output id="cinnamon-whipped-cream">cream with cinnamon</output>
            </outputs>
        </task>
        <task operation="boil">
            <inputs>
                <input ref="glogg-for-filling"/>
            </inputs>
            <outputs>
                <output id="boiling-glogg-for-filling">boiling glogg</output>
            </outputs>
        </task>
        <task operation="mix">
            <inputs>
                <input ref="boiling-glogg-for-filling"/>
                <input ref="soaked-gelatin-for-filling"/>
            </inputs>
            <outputs>
                <output id="glogg-with-gelatin-for-filling">glogg with gelatin</output>
            </outputs>
        </task>
        <task operation="chill">
            <options>
                <option name="duration">
                    <numeric-value number="3" unit="minutes"/>
                </option>
            </options>
            <inputs>
                <input ref="glogg-with-gelatin-for-filling"/>
            </inputs>
            <outputs>
                <output id="cooled-glogg-with-gelatin-for-filling">cooled glogg</output>
            </outputs>
        </task>
        <task operation="measure">
            <options>
                <option name="amount">
                    <numeric-value number="400" unit="grams"/>
                </option>
            </options>
            <inputs>
                <input ref="cinnamon-plum-quark"/>
            </inputs>
            <tools>
                <tool ref="bowl3"/>
            </tools>
            <outputs>
                <output id="400g-quark">quark</output>
            </outputs>
        </task>
        <task operation="measure">
            <options>
                <option name="amount">
                    <numeric-value number="3" unit="tablespoons"/>
                </option>
            </options>
            <inputs>
                <input ref="sugar"/>
                <input ref="400g-quark"/>
            </inputs>
            <outputs>
                <output id="quark+sugar">quark and sugar</output>
            </outputs>
        </task>
        <task operation="mix">
            <inputs>
                <input ref="quark+sugar"/>
                <input ref="cooled-glogg-with-gelatin-for-filling"/>
            </inputs>
            <outputs>
                <output id="glogg-and-quark">glogg and quark</output>
            </outputs>
        </task>
        <task operation="fold">
            <inputs>
                <input ref="glogg-and-quark"/>
                <input ref="cinnamon-whipped-cream"/>
            </inputs>
            <outputs>
                <output id="filling">filling</output>
            </outputs>
        </task>
        <task operation="add-on-top">
            <inputs>
                <input ref="butter+cookies-in-tin"/>
                <input ref="filling"/>
            </inputs>
            <outputs>
                <output id="cake">cake</output>
            </outputs>
        </task>
        <task operation="level">
            <inputs>
                <input ref="cake"/>
            </inputs>
            <outputs>
                <output id="leveled-cake">cake</output>
            </outputs>
        </task>
        <task operation="cover">
            <inputs>
                <input ref="cling-film"/>
                <input ref="leveled-cake"/>
            </inputs>
            <outputs>
                <output id="covered-cake">covered-cake</output>
            </outputs>
        </task>
        <task operation="chill">
            <options>
                <option name="duration">
                    <numeric-value number="4" unit="hours"/>
                </option>
            </options>
            <inputs>
                <input ref="covered-cake"/>
            </inputs>
            <outputs>
                <output id="chilled-cake">chilled cake</output>
            </outputs>
        </task>
        <task operation="soak">
            <inputs>
                <input ref="gelatin-for-glaze"/>
            </inputs>
            <outputs>
                <output id="soaked-gelatin-for-glaze">soaked gelatin</output>
            </outputs>
        </task>
        <task operation="boil">
            <inputs>
                <input ref="glogg-to-be-heated-for-glaze"/>
            </inputs>
            <outputs>
                <output id="boiling-glogg-for-glaze">boiling glogg</output>
            </outputs>
        </task>
        <task operation="mix">
            <inputs>
                <input ref="boiling-glogg-for-glaze"/>
                <input ref="soaked-gelatin-for-glaze"/>
            </inputs>
            <outputs>
                <output id="glogg-with-gelatin-for-glaze">glogg with gelatin</output>
            </outputs>
        </task>
        <task operation="mix">
            <inputs>
                <input ref="glogg-with-gelatin-for-glaze"/>
                <input ref="cold-glogg-for-glaze"/>
            </inputs>
            <outputs>
                <output id="glaze">glaze</output>
            </outputs>
        </task>
        <task operation="spoon">
            <inputs>
                <input ref="chilled-cake"/>
                <input ref="glaze"/>
            </inputs>
            <outputs>
                <output id="glazed-cake">glazed cake</output>
            </outputs>
        </task>
        <task operation="chill">
            <options>
                <option name="duration">
                    <numeric-value number="1" unit="hours"/>
                </option>
            </options>
            <inputs>
                <input ref="glazed-cake"/>
            </inputs>
            <outputs>
                <output id="finished-cake"/>
            </outputs>
        </task>
    </tasks>
</recipe>